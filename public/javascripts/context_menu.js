var contextMenuObserving;var contextMenuUrl;function contextMenuRightClick(a){var c=$(a.target);if(c.is("a")){return}var b=c.parents("tr").first();if(!b.hasClass("hascontextmenu")){return}a.preventDefault();if(!contextMenuIsSelected(b)){contextMenuUnselectAll();contextMenuAddSelection(b);contextMenuSetLastSelected(b)}contextMenuShow(a)}function contextMenuClick(b){var e=$(b.target);var d;if(e.is("a")&&e.hasClass("submenu")){b.preventDefault();return}contextMenuHide();if(e.is("a")||e.is("img")){return}if(b.which==1||(navigator.appVersion.match(/\bMSIE\b/))){var c=e.parents("tr").first();if(c.length&&c.hasClass("hascontextmenu")){if(e.is("input")){if(e.prop("checked")){c.addClass("context-menu-selection")}else{c.removeClass("context-menu-selection")}}else{if(b.ctrlKey||b.metaKey){contextMenuToggleSelection(c)}else{if(b.shiftKey){d=contextMenuLastSelected();if(d.length){var a=false;$(".hascontextmenu").each(function(){if(a||$(this).is(c)){contextMenuAddSelection($(this))}if($(this).is(c)||$(this).is(d)){a=!a}})}else{contextMenuAddSelection(c)}}else{contextMenuUnselectAll();contextMenuAddSelection(c)}}contextMenuSetLastSelected(c)}}else{if(e.is("a")&&(e.hasClass("disabled")||e.hasClass("submenu"))){b.preventDefault()}else{if(e.is(".toggle-selection")||e.is(".ui-dialog *")||$("#ajax-modal").is(":visible")){}else{contextMenuUnselectAll()}}}}}function contextMenuCreate(){if($("#context-menu").length<1){var a=document.createElement("div");a.setAttribute("id","context-menu");a.setAttribute("style","display:none;");document.getElementById("content").appendChild(a)}}function contextMenuShow(a){var i=a.pageX;var h=a.pageY;var e=a.clientY;var f=i;var d=h;var j;var c;var l;var b;var k;var m;var g;$("#context-menu").css("left",(f+"px"));$("#context-menu").css("top",(d+"px"));$("#context-menu").html("");$.ajax({url:contextMenuUrl,data:$(a.target).parents("form").first().serialize(),success:function(p,q,o){$("#context-menu").html(p);c=$("#context-menu").width();l=$("#context-menu").height();m=i+2*c;g=e+l;var n=window_size();b=n.width;k=n.height;if(m>b){f-=c;$("#context-menu").addClass("reverse-x")}else{$("#context-menu").removeClass("reverse-x")}if(g>k){d-=l;$("#context-menu").addClass("reverse-y");if(e<325){$("#context-menu .folder").addClass("down")}}else{if(k-e<345){$("#context-menu .folder").addClass("up")}$("#context-menu").removeClass("reverse-y")}if(f<=0){f=1}if(d<=0){d=1}$("#context-menu").css("left",(f+"px"));$("#context-menu").css("top",(d+"px"));$("#context-menu").show()}})}function contextMenuSetLastSelected(a){$(".cm-last").removeClass("cm-last");a.addClass("cm-last")}function contextMenuLastSelected(){return $(".cm-last").first()}function contextMenuUnselectAll(){$("input[type=checkbox].toggle-selection").prop("checked",false);$(".hascontextmenu").each(function(){contextMenuRemoveSelection($(this))});$(".cm-last").removeClass("cm-last")}function contextMenuHide(){$("#context-menu").hide()}function contextMenuToggleSelection(a){if(contextMenuIsSelected(a)){contextMenuRemoveSelection(a)}else{contextMenuAddSelection(a)}}function contextMenuAddSelection(a){a.addClass("context-menu-selection");contextMenuCheckSelectionBox(a,true);contextMenuClearDocumentSelection()}function contextMenuRemoveSelection(a){a.removeClass("context-menu-selection");contextMenuCheckSelectionBox(a,false)}function contextMenuIsSelected(a){return a.hasClass("context-menu-selection")}function contextMenuCheckSelectionBox(b,a){b.find("input[type=checkbox]").prop("checked",a)}function contextMenuClearDocumentSelection(){if(document.selection){document.selection.empty()}else{window.getSelection().removeAllRanges()}}function contextMenuInit(a){contextMenuUrl=a;contextMenuCreate();contextMenuUnselectAll();if(!contextMenuObserving){$(document).click(contextMenuClick);$(document).contextmenu(contextMenuRightClick);contextMenuObserving=true}}function toggleIssuesSelection(b){var c=$(this).prop("checked");var a=$(this).parents("table").find("input[name=ids\\[\\]]");a.prop("checked",c).parents("tr").toggleClass("context-menu-selection",c)}function window_size(){var a;var b;if(window.innerWidth){a=window.innerWidth;b=window.innerHeight}else{if(document.documentElement){a=document.documentElement.clientWidth;b=document.documentElement.clientHeight}else{a=document.body.clientWidth;b=document.body.clientHeight}}return{width:a,height:b}}$(document).ready(function(){$("input[type=checkbox].toggle-selection").on("change",toggleIssuesSelection)});