jsToolBar.prototype.elements.cut={type:"button",title:"Cut",fn:{wiki:function(){this.encloseLineSelection_cut("{{cut()\n","\n}}")}}};jsToolBar.prototype.elements.us_color_text={type:"button",title:"us_text_color",fn:{wiki:function(){var b=this;this.us_colorMenu(function(a){b.encloseSelection("%{color:"+a+"}","%")})}}};jsToolBar.prototype.encloseLineSelection_cut=function(u,n,r){this.textarea.focus();u=u||"";n=n||"";var z,w,x,y,q,s;var o=60;if(typeof(document.selection)!="undefined"){x=document.selection.createRange().text}else{if(typeof(this.textarea.setSelectionRange)!="undefined"){z=this.textarea.selectionStart;w=this.textarea.selectionEnd;y=this.textarea.scrollTop;z=this.textarea.value.substring(0,z).replace(/[^\r\n]*$/g,"").length;w=this.textarea.value.length-this.textarea.value.substring(w,this.textarea.value.length).replace(/^[^\r\n]*/,"").length;x=this.textarea.value.substring(z,w)}}if(x.match(/ $/)){x=x.substring(0,x.length-1);n=n+" "}var t=u.indexOf("(")+1;var p=(x.length>o)?(x.substr(0,o)+"..."):x;u=u.slice(0,t)+p+u.slice(t);if(typeof(r)=="function"){s=(x)?r.call(this,x):r("")}else{s=(x)?x:""}q=u+s+n;if(typeof(document.selection)!="undefined"){document.selection.createRange().text=q;var v=this.textarea.createTextRange();v.collapse(false);v.move("character",-n.length);v.select()}else{if(typeof(this.textarea.setSelectionRange)!="undefined"){this.textarea.value=this.textarea.value.substring(0,z)+q+this.textarea.value.substring(w);if(x){this.textarea.setSelectionRange(z+q.length,z+q.length)}else{this.textarea.setSelectionRange(z+u.length,z+u.length)}this.textarea.scrollTop=y}}};jsToolBar.prototype.draw_button=function(i,l,j){this.setMode(j);var b,m,n;b=this.elements[l];var k=b.type==undefined||b.type==""||(b.disabled!=undefined&&b.disabled)||(b.context!=undefined&&b.context!=null&&b.context!=this.context);if(!k&&typeof this[b.type]=="function"){m=this[b.type](l);if(m){n=m.draw()}if(n){this.toolNodes[l]=n;$(i).before(n)}}};jsToolBar.prototype.us_colorMenu=function(e){var g=["#31c73b","#7cc3c4","#5a8eff","#ba99ff","#a8bcce","#c1be00","#f99000","#ff8985","#28a931","#67a3a4","#5080e7","#a488e2","#8e9faf","#a19f00","#db7f00","#ff3f30","#1d8925","#508182","#456ec8","#8e75c4","#73818e","#807e00","#bb6c00","#f32300","#136619","#395e5f","#385ca8","#7760a4","#57616c","#5c5a00","#9c5800","#d51e00"];var h=$("<ul class='js_toolbar_us_text_color_menu' style='position:absolute;'></ul>");for(var f=0;f<g.length;f++){$("<li data-color='"+g[f]+"' style='background-color:"+g[f]+"; color:"+g[f]+";'></li>").text(g[f]).appendTo(h).mousedown(function(){e($(this).attr("data-color"))})}$("body").append(h);h.menu().width(192).position({my:"left top",at:"left bottom",of:this.toolNodes.us_color_text});$(document).on("mousedown",function(){h.remove()});return false};