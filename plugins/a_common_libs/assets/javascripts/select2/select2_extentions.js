$.fn.select2.defaults.set("placeholder"," ");RMPlus.Utils=(function(a){var a=a||{};a.makeSelect2MultiCombobox=function(c,f){var g=$(c);if(g.attr("data-multicombobox")!=="true"){g.attr("data-multicombobox","true")}f=f||g.val();if(Object.prototype.toString.call(f)==="[object String]"){if(f.length>0){f=f.split(",")}else{f=[]}}var e=[];for(var d=0,b=f.length;d<b;d++){e[d]={id:f[d],text:f[d]}}if(g.val()===""){g.val(f)}g.select2({createSearchChoice:function(h,i){if($(i).filter(function(){return this.text.localeCompare(h)===0}).length===0){return{id:h,text:h}}},multiple:true,width:"resolve",data:e})};a.makeSelect2Combobox=function(e,c){var l=e.getAttribute("data-get-url")||"";var g=e.getAttribute("data-post-url")||"";var f=e.getAttribute("data-model-attribute")||"name";var c=c||"400px";var i=RMPlus.Utils.combobox_placeholder;var j=parseInt(e.getAttribute("data-min-search-length"))||0;var d=[];var h=undefined;var k=$(e);if(e.tagName.toLowerCase()==="select"){h=(k.val()||"").toString();$.each(k.children(),function(){d.push({id:this.value,text:this.textContent})})}var b;$.fn.select2.amd.require(["select2/data/array","select2/utils"],function(m,n){b=function(o,p){b.__super__.constructor.call(this,o,p)};b.prototype.current=function(q){var p={};if(h){for(var o=0;o<d.length;o++){if(d[o].id.toString()==h){p=d[o];break}}}q(p)};b.prototype.query=function(u,v){var s={},r=false,t,q;s.results=[];if(u.term){for(var p=0,o=d.length;p<o;p++){t=d[p].text.toLocaleUpperCase();q=u.term.toLocaleUpperCase();if(t.localeCompare(q)===0){r=true;break}}if(!r){s.results.push({id:u.term,text:u.term})}}for(var p=0,o=d.length;p<o;p++){t=d[p].text.toUpperCase();q=u.term.toUpperCase();if(t.indexOf(q)>=0){s.results.push(d[p])}}v(s)};n.Extend(b,m)});k.select2({width:c,placeholder:i,allowClear:true,minimumInputLength:j,containerCssClass:"hint--error hint--top hint--rounded",dataAdapter:b,tags:true}).on("change blur close",function(p){$("#s2id_"+e.id).removeAttr("data-hint");$("#s2id_"+e.id).removeClass("hint--always");var n=k.val();found=false;if(!n){return}for(var o=0,m=d.length;o<m;o++){if(d[o].id===$.trim(n)){return}if(typeof d[o].id==="undefined"){if(d[o].id.localeCompare(n)===0){found=true;break}}}if(!found){var q={};q[f]=$.trim(n);$.ajax({url:g,type:"post",dataType:"json",data:q,beforeSend:function(){$("#s2id_"+e.id+" .select2-chosen").addClass("select2-spinner");var r=$(e.form);r.find('input[name="commit"]').prop("disabled","disabled");r.on("submit",function(s){s.preventDefault()})},success:function(r){d.splice(0,0,{id:r.id,text:r[f]});d.sort(function(t,s){var v=$.trim(t.text.toLowerCase()),u=$.trim(s.text.toLowerCase());if(v===""){return -1}if(v<u){return -1}if(v>u){return 1}if(v===u){return 0}});k.find("[data-select2-tag]").remove();k.append('<option value="'+r.id+'">'+r[f]+"</option>").val(r.id)},error:function(t,u,r){var s=$("#s2id_"+e.id);if(t.status===404){s.attr("data-hint",RMPlus.Utils.combobox_404)}else{s.attr("data-hint",RMPlus.Utils.combobox_error)}s.addClass("hint--always");k.val("")},complete:function(s,t){$("#s2id_"+e.id+" .select2-chosen").removeClass("select2-spinner");var r=$(e.form);r.find('input[name="commit"]').removeProp("disabled");r.off("submit")}})}}).on("click",function(m){$("#s2id_"+e.id).removeClass("hint--always");$("#s2id_"+e.id).removeAttr("data-hint")})};return a})(RMPlus.Utils||{});(function(a,b){a.fn.select2.defaults.templateSelection=function(c){return c&&(!Array.isArray(data)||data.length>0)?c.text:b}}(jQuery));