emoticons_image_url="";redmine_base_url="";function jsTooltip(c,b,a){if(typeof jsToolBar.strings=="undefined"){this.title=c||null}else{this.title=jsToolBar.strings[c]||c||null}this.scope=b||null;this.className=a||null}jsTooltip.prototype={mode:"wiki",elements:{},getMode:function(){return this.mode},setMode:function(a){this.mode=a||"wiki"},button:function(d){var c=this.elements[d];if(typeof c.fn[this.mode]!="function"){return null}var a=new jsButton(c.title,c.fn[this.mode],this.scope,"jstb_"+d);if(c.icon!=undefined){a.icon=c.icon}return a},draw:function(){if(!this.scope){return null}this.tooltip=document.createElement("div");if(this.className){this.tooltip.className=this.className}this.tooltip.title=this.title;if(this.icon!=undefined){this.tooltip.style.backgroundImage="url("+this.icon+")"}while(this.tooltip.hasChildNodes()){this.tooltip.removeChild(tooltip.firstChild)}this.toolNodes={};this.a=document.createElement("a");this.a.title="Smiles";this.a.className="smiles";this.img=document.createElement("img");this.img.title="Smiles";this.img.src=redmine_base_url+"/plugin_assets/redmine_wiki_extensions/images/main_smile.png?dummy_param";this.img.id="smiles_img";this.img.tabIndex=200;this.a.appendChild(this.img);this.div=document.createElement("div");this.div.id="group_of_smiles";var d;d=0;for(var f in this.elements){var a,e,c;a=this.elements[f];var g=a.type==undefined||a.type==""||(a.disabled!=undefined&&a.disabled)||(a.context!=undefined&&a.context!=null&&a.context!=this.context);if(!g&&typeof this[a.type]=="function"){e=this[a.type](f);if(e){c=e.draw()}if(d%7==0&&d!=0){this.div.appendChild(document.createElement("br"))}if(c){this.toolNodes[f]=c;this.div.appendChild(c);d++}}}this.a.appendChild(this.div);this.tooltip.appendChild(this.a);return this.tooltip}};jsToolBar.prototype.tooltip=function(d){var c=this.elements[d];var a=new jsTooltip(c.title,this,"jstt_"+d);if(c.icon!=undefined){a.icon=c.icon}return a};jsToolBar.prototype.elements.space5={type:"space"};function setEmoticonButtons(e,a){emoticons_image_url=a;for(var c=0;c<e.length;c++){var b=e[c];var d=new Function('this.encloseSelection("'+b[0]+' ");');jsTooltip.prototype.elements[b[1]]={type:"button",title:b[2],icon:a+"/"+b[1]+"?dummy_param",string:b[0],fn:{wiki:d}}}}jsToolBar.prototype.elements.smiles={type:"tooltip",title:"Smiles"};